<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>AAJJ - Cadastro</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
<div class="bg-white shadow-2xl rounded-2xl p-10 w-full max-w-2xl">
    <h1 class="text-3xl font-bold text-center text-gray-800 mb-8">Cadastro de Aluno / Professor</h1>

    <form id="signupForm" class="space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <input name="name" placeholder="Nome" class="border border-gray-300 rounded-lg p-3 w-full focus:ring-2 focus:ring-black"/>
            <input name="age" placeholder="Idade" type="number" class="border border-gray-300 rounded-lg p-3 w-full focus:ring-2 focus:ring-black"/>
            <input name="email" placeholder="Email" type="email" class="border border-gray-300 rounded-lg p-3 w-full focus:ring-2 focus:ring-black"/>
            <input name="password" placeholder="Senha" type="password" class="border border-gray-300 rounded-lg p-3 w-full focus:ring-2 focus:ring-black"/>
            <input name="phone" placeholder="Telefone" class="border border-gray-300 rounded-lg p-3 w-full focus:ring-2 focus:ring-black"/>

            <select name="teacher" class="border border-gray-300 rounded-lg p-3 w-full focus:ring-2 focus:ring-black">
                <option disabled selected>Selecione o Professor</option>
                <option value="ANDERSON">ANDERSON</option>
            </select>

            <select name="charge" class="border border-gray-300 rounded-lg p-3 w-full focus:ring-2 focus:ring-black">
                <option disabled selected>Selecione o Cargo</option>
                <option value="ALUNO">ALUNO</option>
            </select>

            <select name="time" class="border border-gray-300 rounded-lg p-3 w-full focus:ring-2 focus:ring-black">
                <option disabled selected>Selecione o Horário</option>
                <option value="H_8AM">08:00</option>
                <option value="H_15PM">15:00</option>
                <option value="H_16PM">16:00</option>
                <option value="H_17PM">17:00</option>
                <option value="H_18PM">18:00</option>
                <option value="H_19PM">19:00</option>
                <option value="H_20PM">20:00</option>
                <option value="H_21PM">21:00</option>
            </select>

            <select name="belt" class="border border-gray-300 rounded-lg p-3 w-full focus:ring-2 focus:ring-black">
                <option disabled selected>Selecione a Faixa</option>
                <option value="BRANCA">Branca</option>
                <option value="CINZA_E_BRANCA">Cinza e Branca</option>
                <option value="CINZA">Cinza</option>
                <option value="CINZA_E_PRETA">Cinza e Preta</option>
                <option value="AMARELA_E_BRANCA">Amarela e Branca</option>
                <option value="AMARELA">Amarela</option>
                <option value="AMARELA_E_PRETA">Amarela e Preta</option>
                <option value="LARANJA_E_BRANCA">Laranja e Branca</option>
                <option value="LARANJA">Laranja</option>
                <option value="LARANJA_E_PRETA">Laranja e Preta</option>
                <option value="VERDE_E_BRANCA">Verde e Branca</option>
                <option value="VERDE">Verde</option>
                <option value="VERDE_E_PRETA">Verde e Preta</option>
                <option value="AZUL">Azul</option>
                <option value="ROXA">Roxa</option>
                <option value="MARROM">Marrom</option>
                <option value="PRETA">Preta</option>
            </select>
        </div>

        <button type="submit"
                class="w-full bg-black text-white py-3 rounded-lg font-semibold text-lg hover:bg-gray-800 transition-all duration-300">
            Cadastrar
        </button>
    </form>

    <p class="text-center text-gray-500 text-sm mt-6">
        Já possui uma conta? <a href="/login" class="text-black font-semibold hover:underline">Faça login</a>
    </p>
</div>

<script defer>
    document.getElementById("signupForm").addEventListener("submit", async function (e) {
      e.preventDefault();
      const form = e.target;
      const data = {
        name: form.name.value,
        age: form.age.value,
        password: form.password.value,
        email: form.email.value,
        phone: form.phone.value,
        teacher: form.teacher.value,
        charge: form.charge.value,
        time: form.time.value,
        belt: form.belt.value
      };

      const resp = await fetch("http://localhost:8080/register", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      const result = await resp.json();
      if (!resp.ok) {
        alert("Erro: " + result.erro);
      } else {
        alert("Cadastro realizado com sucesso!");
        if (data.charge === "PROFESSOR") {
          window.location.href = "/team";
        } else {
          window.location.href = "/profile";
        }
      }
    });
</script>
</body>
</html>
