<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>AAJJ Backend</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white flex items-center justify-center min-h-screen">
<div class="bg-neutral-900 p-8 rounded-2xl shadow-lg w-full max-w-lg">
    <h1 class="text-2xl font-bold text-center mb-6">Atualizar Cadastro</h1>

    <form id="signupForm" class="space-y-4">
        <input type="text" name="name" placeholder="Nome completo"
               class="w-full p-3 rounded-lg bg-neutral-800 border border-neutral-700 focus:outline-none focus:ring-2 focus:ring-white"/>

        <input type="number" name="age" placeholder="Idade"
               class="w-full p-3 rounded-lg bg-neutral-800 border border-neutral-700 focus:outline-none focus:ring-2 focus:ring-white"/>

        <input type="text" name="phone" placeholder="Telefone"
               class="w-full p-3 rounded-lg bg-neutral-800 border border-neutral-700 focus:outline-none focus:ring-2 focus:ring-white"/>

        <select name="teacher"
                class="w-full p-3 rounded-lg bg-neutral-800 border border-neutral-700 focus:outline-none focus:ring-2 focus:ring-white">
            <option value="">Selecione o professor</option>
            <option value="ANDERSON">ANDERSON</option>
            <option value="ULISSES">ULISSES</option>
        </select>

        <select name="time"
                class="w-full p-3 rounded-lg bg-neutral-800 border border-neutral-700 focus:outline-none focus:ring-2 focus:ring-white">
            <option value="">Selecione o hor√°rio</option>
            <option value="H_8AM">08:00</option>
            <option value="H_15PM">15:00</option>
            <option value="H_16PM">16:00</option>
            <option value="H_17PM">17:00</option>
            <option value="H_18PM">18:00</option>
            <option value="H_19PM">19:00</option>
            <option value="H_20PM">20:00</option>
            <option value="H_21PM">21:00</option>
        </select>

        <select name="belt"
                class="w-full p-3 rounded-lg bg-neutral-800 border border-neutral-700 focus:outline-none focus:ring-2 focus:ring-white">
            <option value="">Selecione a faixa</option>
            <option value="BRANCA">BRANCA</option>
            <option value="CINZA_E_BRANCA">CINZA E BRANCA</option>
            <option value="CINZA">CINZA</option>
            <option value="CINZA_E_PRETA">CINZA E PRETA</option>
            <option value="AMARELA_E_BRANCA">AMARELA E BRANCA</option>
            <option value="AMARELA">AMARELA</option>
            <option value="AMARELA_E_PRETA">AMARELA E PRETA</option>
            <option value="LARANJA_E_BRANCA">LARANJA E BRANCA</option>
            <option value="LARANJA">LARANJA</option>
            <option value="LARANJA_E_PRETA">LARANJA E PRETA</option>
            <option value="VERDE_E_BRANCA">VERDE E BRANCA</option>
            <option value="VERDE">VERDE</option>
            <option value="VERDE_E_PRETA">VERDE E PRETA</option>
            <option value="AZUL">AZUL</option>
            <option value="ROXA">ROXA</option>
            <option value="MARROM">MARROM</option>
            <option value="PRETA">PRETA</option>
        </select>

        <button type="submit"
                class="w-full bg-white text-black py-3 rounded-lg font-semibold hover:bg-neutral-200 transition">
            Atualizar
        </button>
        <button
                class="w-full bg-white text-black py-3 rounded-lg font-semibold hover:bg-neutral-200 transition">
            Voltar
            <a href="/profile"></a>
        </button>
    </form>
</div>

<script defer>
    document.getElementById("signupForm").addEventListener("submit", async function (e) {
      e.preventDefault();
      const form = e.target;
      const data = {
        name: form.name.value,
        age: form.age.value,
        phone: form.phone.value,
        teacher: form.teacher.value,
        time: form.time.value,
        belt: form.belt.value
      };

      const resp = await fetch("/user/api/profile", {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      const result = await resp.json();
      if (!resp.ok) {
        alert("Erro: " + result.erro);
      } else {
        alert("Cadastro atualizado com sucesso!");
      }
    });
</script>
</body>
</html>